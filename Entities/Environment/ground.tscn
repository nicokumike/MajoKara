[gd_scene load_steps=34 format=3 uid="uid://y56dift1p0bn"]

[ext_resource type="Script" uid="uid://h0xw8ngtc1ls" path="res://Entities/Environment/ground.gd" id="1_xacfp"]
[ext_resource type="FontFile" uid="uid://cxbu7mq3tdt0i" path="res://Assets/Fonts/Silver.ttf" id="3_x0arr"]
[ext_resource type="Texture2D" uid="uid://cjspc38qngl7l" path="res://Assets/Entities/Buildings/Cauldron.png" id="4_oca3b"]
[ext_resource type="Theme" uid="uid://g8abk264gjw4" path="res://Assets/UI/Themes/label.tres" id="7_rt06b"]
[ext_resource type="PackedScene" uid="uid://cjhvmaqvcr34e" path="res://Entities/Environment/witches_house.tscn" id="10_t6roi"]
[ext_resource type="Texture2D" uid="uid://4qs7rdswig7u" path="res://Assets/Entities/Environment/Hill.png" id="11_begxa"]
[ext_resource type="Texture2D" uid="uid://g4h2513xy5u7" path="res://Assets/Entities/Environment/Ocean.png" id="12_begxa"]
[ext_resource type="Texture2D" uid="uid://bccikv7k1nu05" path="res://Assets/Entities/Environment/OceanLine.png" id="13_4k0v6"]
[ext_resource type="Script" uid="uid://ctst83piwb717" path="res://Entities/Environment/small_plants_planter.gd" id="13_begxa"]
[ext_resource type="PackedScene" uid="uid://c6ow42u8tprkq" path="res://Entities/Environment/wife_human.tscn" id="14_4k0v6"]
[ext_resource type="Script" uid="uid://cavairenymafs" path="res://Entities/Environment/cutscene_manager.gd" id="14_dh78g"]
[ext_resource type="PackedScene" uid="uid://dw2ahw7o31oq3" path="res://Entities/Particles/magic_particles.tscn" id="14_xcyc6"]
[ext_resource type="Shader" uid="uid://ckgi6s6jrks28" path="res://Assets/Shaders/OutlineShader.gdshader" id="15_4k0v6"]
[ext_resource type="Texture2D" uid="uid://dfotnuuvan3ti" path="res://Assets/Entities/Buildings/DestroyedCenterOfDevelopment.png" id="15_74skp"]
[ext_resource type="Texture2D" uid="uid://n8jo2bbxir1f" path="res://Assets/Entities/Environment/FiveAncients.png" id="15_dh78g"]
[ext_resource type="Texture2D" uid="uid://br5xef63nkk3o" path="res://Assets/Entities/Buildings/LittleHouseDoor.png" id="15_t5yrr"]

[sub_resource type="Animation" id="Animation_3ryhh"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_wcb51"]
resource_name = "Stir"
length = 1.8
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_d6xj7"]
_data = {
&"RESET": SubResource("Animation_3ryhh"),
&"Stir": SubResource("Animation_wcb51")
}

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dh78g"]
resource_local_to_scene = true
shader = ExtResource("15_4k0v6")
shader_parameter/line_colour = Color(1, 0.435294, 0.686275, 1)
shader_parameter/line_thickness = 2

[sub_resource type="Gradient" id="Gradient_0avtt"]
colors = PackedColorArray(1, 1, 1, 1, 1, 0.435294, 0.686275, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_8k7ho"]
gradient = SubResource("Gradient_0avtt")

[sub_resource type="Curve" id="Curve_nbija"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.639706, 0.932584), 0.0, 0.0, 0, 0, Vector2(1, 0), -0.382022, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_8aumh"]
curve = SubResource("Curve_nbija")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_dh78g"]
resource_local_to_scene = true
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(5, 1, 1)
angular_velocity_min = -50.0
angular_velocity_max = 50.0
gravity = Vector3(0, 0, 0)
scale_min = 0.2
scale_max = 0.2
scale_curve = SubResource("CurveTexture_8aumh")
color_ramp = SubResource("GradientTexture1D_8k7ho")
hue_variation_min = -2.23517e-08
hue_variation_max = -2.23517e-08
anim_offset_max = 1.0

[sub_resource type="Curve" id="Curve_8aumh"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.125, 0.719101), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_ipt68"]
curve = SubResource("Curve_8aumh")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_74skp"]
resource_local_to_scene = true
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(2, 1, 1)
direction = Vector3(0, -1, 0)
initial_velocity_max = 15.0
angular_velocity_min = -248.28
angular_velocity_max = 157.24
gravity = Vector3(0, 25, 0)
scale_min = 0.5
scale_max = 0.5
scale_curve = SubResource("CurveTexture_ipt68")
anim_offset_max = 1.0
collision_mode = 1
collision_friction = 0.2
collision_bounce = 0.18

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_xcyc6"]
polygon = PackedVector2Array(-200, 0, 1056, 0, 1056, 19, -200, 19)

[sub_resource type="Curve2D" id="Curve2D_6rse7"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, -2174, 0, -31.975, 0, 0, 0, 1351, 0, 0, 0, 0, 0, 1378, -4, 0, 0, 0, 0, 1407, -13, 0, 0, 0, 0, 1447, -37, 0, 0, 0, 0, 1487, -61, 0, 0, 0, 0, 1515, -71, 0, 0, 0, 0, 1558, -78, 0, 0, 0.085, 26.095, 1588, -78)
}
point_count = 9

[sub_resource type="Animation" id="Animation_kqgkc"]
resource_name = "FirstCutscene"
length = 7.0
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("LittleHouseDoor:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
}

[sub_resource type="Animation" id="Animation_74skp"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("LittleHouseDoor:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_b2ylo"]
_data = {
&"FirstCutscene": SubResource("Animation_kqgkc"),
&"RESET": SubResource("Animation_74skp")
}

[node name="Ground" type="Node2D"]
script = ExtResource("1_xacfp")

[node name="DEBUGText" type="Label" parent="."]
visible = false
offset_left = 5.0
offset_top = 251.0
offset_right = 152.0
offset_bottom = 320.0
theme_override_fonts/font = ExtResource("3_x0arr")
theme_override_font_sizes/font_size = 19
text = "The ground must be 32 px from the bottom
for the zoom to work."
autowrap_mode = 3

[node name="Line2D" type="Line2D" parent="."]
points = PackedVector2Array(-2000, 0, 1500, 0)
width = 2.0
default_color = Color(1, 0.956863, 0.980392, 1)

[node name="Cauldron" type="Sprite2D" parent="."]
visible = false
position = Vector2(198, -19)
texture = ExtResource("4_oca3b")
offset = Vector2(0, 7)
hframes = 18

[node name="AnimationPlayer" type="AnimationPlayer" parent="Cauldron"]
libraries = {
&"": SubResource("AnimationLibrary_d6xj7")
}
autoplay = "Stir"
speed_scale = 3.0

[node name="MagicParticles3" parent="Cauldron" instance=ExtResource("14_xcyc6")]
position = Vector2(1, 7)

[node name="CanvasGroup" parent="Cauldron/MagicParticles3" index="0"]
material = SubResource("ShaderMaterial_dh78g")

[node name="GPUParticles2D" parent="Cauldron/MagicParticles3/CanvasGroup" index="0"]
position = Vector2(-2, 1)
amount = 10
process_material = SubResource("ParticleProcessMaterial_dh78g")

[node name="GPUParticles2D" parent="Cauldron/MagicParticles3" index="1"]
amount = 15
process_material = SubResource("ParticleProcessMaterial_74skp")

[node name="Count" type="Label" parent="."]
visible = false
offset_left = 612.0
offset_top = -121.0
offset_right = 684.0
offset_bottom = -37.0
theme = ExtResource("7_rt06b")
theme_override_font_sizes/font_size = 76

[node name="LightOccluder2D" type="LightOccluder2D" parent="."]
position = Vector2(-1, -1)
occluder = SubResource("OccluderPolygon2D_xcyc6")

[node name="WitchesHouse" parent="." instance=ExtResource("10_t6roi")]
z_index = -1
position = Vector2(132, -1)

[node name="Ocean" type="Sprite2D" parent="."]
position = Vector2(1884, -95)
texture = ExtResource("12_begxa")

[node name="Ocean2" type="Sprite2D" parent="Ocean"]
position = Vector2(2232, 0)
rotation = 3.14159
scale = Vector2(1, -1)
texture = ExtResource("12_begxa")

[node name="OceanLine" type="Sprite2D" parent="Ocean"]
position = Vector2(256, 0)
texture = ExtResource("13_4k0v6")

[node name="OceanLine2" type="Sprite2D" parent="Ocean"]
position = Vector2(503, 0)
texture = ExtResource("13_4k0v6")

[node name="OceanLine3" type="Sprite2D" parent="Ocean"]
position = Vector2(750, 0)
texture = ExtResource("13_4k0v6")

[node name="OceanLine4" type="Sprite2D" parent="Ocean"]
position = Vector2(997, 0)
texture = ExtResource("13_4k0v6")

[node name="OceanLine5" type="Sprite2D" parent="Ocean"]
position = Vector2(1244, 0)
texture = ExtResource("13_4k0v6")

[node name="OceanLine6" type="Sprite2D" parent="Ocean"]
position = Vector2(1491, 0)
texture = ExtResource("13_4k0v6")

[node name="OceanLine7" type="Sprite2D" parent="Ocean"]
position = Vector2(1738, 0)
texture = ExtResource("13_4k0v6")

[node name="OceanLine8" type="Sprite2D" parent="Ocean"]
position = Vector2(1985, 0)
texture = ExtResource("13_4k0v6")

[node name="Hill" type="Sprite2D" parent="Ocean"]
position = Vector2(-256, 0)
texture = ExtResource("11_begxa")

[node name="Hill2" type="Sprite2D" parent="Ocean"]
position = Vector2(2488, -78)
texture = ExtResource("11_begxa")

[node name="FiveAncients" type="Sprite2D" parent="."]
position = Vector2(-890, -65)
texture = ExtResource("15_dh78g")

[node name="DestroyedCenterOfDevelopment" type="Sprite2D" parent="."]
position = Vector2(-46, -64)
texture = ExtResource("15_74skp")

[node name="CameraCutsceneX" type="Node2D" parent="."]

[node name="Cutscene_Beginning" type="Marker2D" parent="CameraCutsceneX"]
position = Vector2(219, -104)

[node name="DONOTMOVE_Y" type="Camera2D" parent="."]
position = Vector2(219, -104)
enabled = false
zoom = Vector2(4, 4)

[node name="SmallPlants" type="Path2D" parent="."]
position = Vector2(175, 0)
curve = SubResource("Curve2D_6rse7")
script = ExtResource("13_begxa")

[node name="PathFollow2D" type="PathFollow2D" parent="SmallPlants"]
position = Vector2(-2174, 0)
rotates = false

[node name="Timer" type="Timer" parent="SmallPlants"]
wait_time = 0.5
one_shot = true
autostart = true

[node name="CutsceneManager" type="Node2D" parent="."]
script = ExtResource("14_dh78g")

[node name="FirstCutscene" type="Node2D" parent="CutsceneManager"]

[node name="WifeSpawn" type="Marker2D" parent="CutsceneManager/FirstCutscene"]
position = Vector2(138, -24)

[node name="WifeHuman" parent="CutsceneManager/FirstCutscene/WifeSpawn" instance=ExtResource("14_4k0v6")]

[node name="HusbandSpawn" type="Marker2D" parent="CutsceneManager/FirstCutscene"]
position = Vector2(490, -21)

[node name="WitchSpawn" type="Marker2D" parent="CutsceneManager/FirstCutscene"]
position = Vector2(-51, -127)

[node name="LittleHouseDoor" type="Sprite2D" parent="CutsceneManager/FirstCutscene"]
z_index = -1
position = Vector2(139, -24)
texture = ExtResource("15_t5yrr")
hframes = 11

[node name="AnimationPlayer" type="AnimationPlayer" parent="CutsceneManager/FirstCutscene"]
libraries = {
&"": SubResource("AnimationLibrary_b2ylo")
}

[connection signal="timeout" from="SmallPlants/Timer" to="SmallPlants" method="_on_timer_timeout"]

[editable path="Cauldron/MagicParticles3"]
