[gd_scene load_steps=31 format=3 uid="uid://y56dift1p0bn"]

[ext_resource type="Script" uid="uid://h0xw8ngtc1ls" path="res://Entities/Environment/ground.gd" id="1_xacfp"]
[ext_resource type="FontFile" uid="uid://cxbu7mq3tdt0i" path="res://Assets/Fonts/Silver.ttf" id="3_x0arr"]
[ext_resource type="Texture2D" uid="uid://b8e0x5t8ootn1" path="res://Assets/Entities/Buildings/WitchesHouse.png" id="4_begxa"]
[ext_resource type="Texture2D" uid="uid://cjspc38qngl7l" path="res://Assets/Entities/Buildings/Cauldron.png" id="4_oca3b"]
[ext_resource type="Texture2D" uid="uid://dlot1vbhnuh4d" path="res://Assets/Entities/Characters/MajoKara.png" id="5_wcb51"]
[ext_resource type="Texture2D" uid="uid://bs8eh7lvr2xm3" path="res://Assets/Entities/Buildings/plantshouse.png" id="7_6rse7"]
[ext_resource type="Script" uid="uid://dpsa1igwwgwj1" path="res://Entities/Environment/planter.gd" id="7_d6xj7"]
[ext_resource type="Theme" uid="uid://g8abk264gjw4" path="res://Assets/UI/Themes/label.tres" id="7_rt06b"]
[ext_resource type="Texture2D" uid="uid://c2fhe0pdp2qxh" path="res://Assets/Entities/Buildings/fairypond.png" id="9_pu4v3"]
[ext_resource type="Shader" path="res://Assets/Shaders/wind.gdshader" id="10_6rse7"]
[ext_resource type="Texture2D" uid="uid://dtdx5l5ty5qn6" path="res://Assets/Entities/Buildings/fairypondleaves.png" id="11_begxa"]
[ext_resource type="Texture2D" uid="uid://cb0i5d7tx2qlf" path="res://Assets/Entities/Buildings/ojamajobirth.png" id="13_begxa"]
[ext_resource type="PackedScene" uid="uid://cvpj225k0fuo4" path="res://UI/CircleSelection.tscn" id="13_xcyc6"]
[ext_resource type="PackedScene" uid="uid://dw2ahw7o31oq3" path="res://Entities/Particles/magic_particles.tscn" id="14_xcyc6"]
[ext_resource type="Shader" uid="uid://ckgi6s6jrks28" path="res://Assets/Shaders/OutlineShader.gdshader" id="15_4k0v6"]

[sub_resource type="Animation" id="Animation_3ryhh"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_wcb51"]
resource_name = "Stir"
length = 1.8
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_d6xj7"]
_data = {
&"RESET": SubResource("Animation_3ryhh"),
&"Stir": SubResource("Animation_wcb51")
}

[sub_resource type="Curve2D" id="Curve2D_3ryhh"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 100, 0)
}
point_count = 2

[sub_resource type="ShaderMaterial" id="ShaderMaterial_xcyc6"]
shader = ExtResource("10_6rse7")
shader_parameter/speed = 2.0
shader_parameter/minStrength = 0.0
shader_parameter/maxStrength = 0.1
shader_parameter/strengthScale = 100.0
shader_parameter/interval = 7.575
shader_parameter/detail = 1.0
shader_parameter/distortion = 0.0
shader_parameter/heightOffset = 0.0
shader_parameter/offset = 0.0

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_xcyc6"]
polygon = PackedVector2Array(-200, 0, 1056, 0, 1056, 19, -200, 19)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dh78g"]
resource_local_to_scene = true
shader = ExtResource("15_4k0v6")
shader_parameter/line_colour = Color(1, 0.435294, 0.686275, 1)
shader_parameter/line_thickness = 2

[sub_resource type="Gradient" id="Gradient_0avtt"]
colors = PackedColorArray(1, 1, 1, 1, 1, 0.435294, 0.686275, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_8k7ho"]
gradient = SubResource("Gradient_0avtt")

[sub_resource type="Curve" id="Curve_nbija"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.639706, 0.932584), 0.0, 0.0, 0, 0, Vector2(1, 0), -0.382022, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_8aumh"]
curve = SubResource("Curve_nbija")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_dh78g"]
resource_local_to_scene = true
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(5, 1, 1)
angular_velocity_min = -50.0
angular_velocity_max = 50.0
gravity = Vector3(0, 0, 0)
scale_min = 0.2
scale_max = 0.2
scale_curve = SubResource("CurveTexture_8aumh")
color_ramp = SubResource("GradientTexture1D_8k7ho")
hue_variation_min = -2.23517e-08
hue_variation_max = -2.23517e-08
anim_offset_max = 1.0

[sub_resource type="Curve" id="Curve_8aumh"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.125, 0.719101), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_ipt68"]
curve = SubResource("Curve_8aumh")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_74skp"]
resource_local_to_scene = true
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(2, 1, 1)
direction = Vector3(0, -1, 0)
initial_velocity_max = 15.0
angular_velocity_min = -248.28
angular_velocity_max = 157.24
gravity = Vector3(0, 25, 0)
scale_min = 0.5
scale_max = 0.5
scale_curve = SubResource("CurveTexture_ipt68")
anim_offset_max = 1.0
collision_mode = 1
collision_friction = 0.2
collision_bounce = 0.18

[node name="Ground" type="Node2D"]
script = ExtResource("1_xacfp")

[node name="Label" type="Label" parent="."]
visible = false
offset_left = 5.0
offset_top = 251.0
offset_right = 152.0
offset_bottom = 320.0
theme_override_fonts/font = ExtResource("3_x0arr")
theme_override_font_sizes/font_size = 19
text = "The ground must be 32 px from the bottom
for the zoom to work."
autowrap_mode = 3

[node name="Line2D" type="Line2D" parent="."]
points = PackedVector2Array(-5000, 0, 5000, 0)
width = 2.0
default_color = Color(1, 0.956863, 0.980392, 1)

[node name="Plantshouse" type="Sprite2D" parent="."]
position = Vector2(-142, -65)
texture = ExtResource("7_6rse7")

[node name="PlantsHouseButton" type="Button" parent="Plantshouse"]
offset_left = -64.0
offset_top = -1.0
offset_right = 63.0
offset_bottom = 64.0

[node name="WitchHouseTest" type="Sprite2D" parent="."]
position = Vector2(134, -65)
texture = ExtResource("4_begxa")

[node name="WitchHouseButton" type="Button" parent="WitchHouseTest"]
visible = false
offset_left = -32.0
offset_top = 18.0
offset_right = 69.0
offset_bottom = 64.0

[node name="Cauldron" type="Sprite2D" parent="."]
position = Vector2(198, -19)
texture = ExtResource("4_oca3b")
offset = Vector2(0, 7)
hframes = 18

[node name="AnimationPlayer" type="AnimationPlayer" parent="Cauldron"]
libraries = {
&"": SubResource("AnimationLibrary_d6xj7")
}
autoplay = "Stir"
speed_scale = 3.0

[node name="MajoKara" type="Sprite2D" parent="."]
position = Vector2(188, -12)
texture = ExtResource("5_wcb51")
hframes = 4

[node name="Forest" type="Path2D" parent="."]
position = Vector2(156, -1)
curve = SubResource("Curve2D_3ryhh")

[node name="Planter" type="PathFollow2D" parent="Forest"]
position = Vector2(200, 0)
rotation = 3.14159
rotates = false
script = ExtResource("7_d6xj7")

[node name="Timer" type="Timer" parent="Forest"]
wait_time = 0.05

[node name="Line2D" type="Line2D" parent="Forest"]
position = Vector2(102, 1)
points = PackedVector2Array(-1, 0, 99, 0)
width = 2.0
default_color = Color(0.541176, 0.419608, 0.682353, 1)
texture_mode = 1

[node name="Count" type="Label" parent="."]
offset_left = 612.0
offset_top = -121.0
offset_right = 684.0
offset_bottom = -37.0
theme = ExtResource("7_rt06b")
theme_override_font_sizes/font_size = 76

[node name="Fairypond" type="Sprite2D" parent="."]
position = Vector2(12, -33)
texture = ExtResource("9_pu4v3")

[node name="Fairypondleaves" type="Sprite2D" parent="Fairypond"]
material = SubResource("ShaderMaterial_xcyc6")
position = Vector2(-19, -8)
texture = ExtResource("11_begxa")

[node name="FairyPondButton" type="Button" parent="Fairypond"]
offset_left = -52.0
offset_top = 11.0
offset_right = 61.0
offset_bottom = 32.0

[node name="OjamajoBirth" type="Sprite2D" parent="."]
position = Vector2(-309, -65)
texture = ExtResource("13_begxa")

[node name="OjamajoBirthButton" type="Button" parent="OjamajoBirth"]
offset_left = -63.0
offset_top = -64.0
offset_right = 64.0
offset_bottom = 64.0

[node name="CanvasLayer" parent="." instance=ExtResource("13_xcyc6")]
offset_left = 222.0
offset_top = -84.0
offset_right = 272.0
offset_bottom = -34.0

[node name="MagicParticles" parent="." instance=ExtResource("14_xcyc6")]
position = Vector2(132, -37)

[node name="LightOccluder2D" type="LightOccluder2D" parent="."]
position = Vector2(-1, -1)
occluder = SubResource("OccluderPolygon2D_xcyc6")

[node name="MagicParticles3" parent="." instance=ExtResource("14_xcyc6")]
position = Vector2(199, -12)

[node name="CanvasGroup" parent="MagicParticles3" index="0"]
material = SubResource("ShaderMaterial_dh78g")

[node name="GPUParticles2D" parent="MagicParticles3/CanvasGroup" index="0"]
position = Vector2(-2, 1)
amount = 10
process_material = SubResource("ParticleProcessMaterial_dh78g")

[node name="GPUParticles2D" parent="MagicParticles3" index="1"]
amount = 15
process_material = SubResource("ParticleProcessMaterial_74skp")

[connection signal="mouse_entered" from="Plantshouse/PlantsHouseButton" to="." method="_on_plants_house_button_mouse_entered"]
[connection signal="mouse_exited" from="Plantshouse/PlantsHouseButton" to="." method="_on_plants_house_button_mouse_exited"]
[connection signal="mouse_entered" from="WitchHouseTest/WitchHouseButton" to="." method="_on_witch_house_button_mouse_entered"]
[connection signal="mouse_exited" from="WitchHouseTest/WitchHouseButton" to="." method="_on_witch_house_button_mouse_exited"]
[connection signal="pressed" from="WitchHouseTest/WitchHouseButton" to="." method="_on_witch_house_button_pressed"]
[connection signal="timeout" from="Forest/Timer" to="Forest/Planter" method="_on_timer_timeout"]
[connection signal="mouse_entered" from="Fairypond/FairyPondButton" to="." method="_on_fairy_pond_button_mouse_entered"]
[connection signal="mouse_exited" from="Fairypond/FairyPondButton" to="." method="_on_fairy_pond_button_mouse_exited"]
[connection signal="pressed" from="Fairypond/FairyPondButton" to="." method="_on_fairy_pond_button_pressed"]
[connection signal="mouse_entered" from="OjamajoBirth/OjamajoBirthButton" to="." method="_on_ojamajo_birth_button_mouse_entered"]
[connection signal="mouse_exited" from="OjamajoBirth/OjamajoBirthButton" to="." method="_on_ojamajo_birth_button_mouse_exited"]

[editable path="MagicParticles3"]
